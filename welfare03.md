몇 살 때 월급을 가장 많이 받을까
================
작성자
July 31, 2020

## 3\. 나이와 월급의 관계

나이에 따라 월급이 어떻게 다른지 데이터 분석을 통해 알아보겠습니다.

### 분석 절차

#### 1\. 변수 검토하기

  - 나이 변수 검토 한국복지패널 데이터에는 나이 변수는 없고 태어난 연도 변수만 있기 때문에 태어난 연도를 이용해서 나이
    변수를 만들어야 합니다. 변수를 검토하기 위해서는 변수의 속성을 파악하고 이상치가 있는지를 확인합니다.

<!-- end list -->

``` r
class (welfare$birth) # 연도 변수 데이터 속성 확인하기 
```

    ## [1] "numeric"

``` r
summary (welfare$birth) # 연도 변수 데이터 요약 통계량 산출하기기
```

    ##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
    ##    1907    1946    1966    1968    1988    2014

코드북을 보면 태어난 연도는 1900\~2014 사이의 값을 지니고, 모름/무응답은 9999로 코딩 되어 있는 것을 알 수
있습니다. 요약 통계량의 값에서 이상치는 발견되지 않았습니다.

  - 월급 변수 검토하기 앞서 월급 변수를 검토하고 전처리를 완료하였기에 생략하겠습니다.

#### 2\. 전처리

앞서 월급 변수는 전처리를 완료하였기에 나이 변수에 대해서만 결측치를 확인하겠습니다.

``` r
table(is.na(welfare$birth)) # 연도 변수 결측치 확인하기 
```

    ## 
    ## FALSE 
    ## 16664

출력된 결과를 보면 결측치가 없어 파생 변수를 만드는 단계로 넘어가겠습니다.

#### 3\. 파생변수 만들기 - 나이

2015년도에 조사가 진행되었으니 2015에서 태어난 연도를 뺀 후 1을 더해 나이를 구하면 됩니다.

``` r
welfare <- welfare %>%
  mutate(age = (2015-birth)+1) # 나이 파생변수 만들기
summary(welfare$age) # 나이 파생변수의 요약통계량 산출하기 
```

    ##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
    ##    2.00   28.00   50.00   48.43   70.00  109.00

빈도표를 만들어 새로 만든 나이 변수의 특징을 파악해보겠습니다.

``` r
qplot(welfare$age)
```

![](welfare03_files/figure-gfm/unnamed-chunk-5-1.png)<!-- -->

### 나이와 월급의 관계 분석하기

#### 1\. 나이에 따른 월급 평균표 만들기

나이별 월급 평균표를 만들기 위한 구조는 아래와 같습니다. 먼저 welfare 데이터의 월급 데이터를 추출하고, 나이 별 그룹으로
분리해서 요약 통계량을 산출합니다. 많은 내용을 보기 보다는 일부 데이터를 확인하기 위해 head를 사용합니다.

``` r
age_income <- welfare %>% 
  filter(!is.na(income)) %>%            # 결측치를 제외한 월급 데이터 추출하기 
  group_by(age) %>%                     # 나이별로 분리하기 
  summarise(mean_income = mean(income)) # 요약 통계량 산출과 동시에 월급 평균 변수 생성하기 
```

    ## `summarise()` ungrouping output (override with `.groups` argument)

``` r
head(age_income) # 앞부분부터 6행까지 출력하기 
```

    ## # A tibble: 6 x 2
    ##     age mean_income
    ##   <dbl>       <dbl>
    ## 1    20        121.
    ## 2    21        106.
    ## 3    22        130.
    ## 4    23        142.
    ## 5    24        134.
    ## 6    25        145.

#### 2\. 그래프 만들기

나이에 따른 월급의 변화가 표현되도록 선 그래프를 그리겠습니다. x축을 나이, y축을 평균 월급으로 지정합니다.

``` r
ggplot(data=age_income, aes(age,mean_income)) + geom_line()
```

![](welfare03_files/figure-gfm/unnamed-chunk-7-1.png)<!-- -->

<span style="color:red">**출력 결과를 보면 20대에 100만원 정도 월급을 받고, 40-50대 약 300만원
가량 가장 많은 월급을 받고 그 이후로 감소하다가 70세 이후 20대보다 낮은 월급을 받습니다.**</span>
